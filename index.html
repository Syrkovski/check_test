  <!-- Важно: файл содержит полный шаблон с встроенными шрифтами jsPDF. Не сокращайте и не вырезайте блоки, чтобы не потерять функциональность генерации PDF. -->
    <section class="section" aria-labelledby="vendor-title">
      <div class="section-header">
        <div class="section-heading">
          <h2 id="vendor-title">Данные ИП</h2>
          <p class="section-description">Реквизиты подставляются в PDF и сохраняются локально. Можно отредактировать их прямо здесь, без правки vendor.json.</p>
        </div>
        <div class="section-actions">
          <button type="button" id="toggle-vendor-form">Редактировать реквизиты</button>
        </div>
      </div>
      <form id="vendor-form" class="hidden">
        <div class="inline-fields">
          <label>
            Наименование
            <textarea id="vendor-name" required></textarea>
          </label>
          <label>
            ИНН
            <input type="text" id="vendor-inn" />
          </label>
          <label>
            ОГРНИП
            <input type="text" id="vendor-ogrnip" />
          </label>
          <label>
            Налоговый режим
            <input type="text" id="vendor-tax" />
          </label>
          <label>
            Вид деятельности
            <input type="text" id="vendor-activity" />
          </label>
          <label>
            ОКВЭД
            <input type="text" id="vendor-okved" />
          </label>
          <label>
            Место деятельности
            <input type="text" id="vendor-location" />
          </label>
          <label>
            Банк
            <input type="text" id="vendor-bank" />
          </label>
          <label>
            Р/с
            <input type="text" id="vendor-account" />
          </label>
          <label>
            БИК
            <input type="text" id="vendor-bik" />
          </label>
        </div>
        <div class="actions">
          <button type="submit">Сохранить реквизиты</button>
          <button type="button" id="cancel-vendor">Отмена</button>
        </div>
      </form>
    </section>

        <p class="section-description">Дата и время подставятся автоматически, при необходимости их можно вписать вручную.</p>
            <input
              type="text"
              id="service"
              name="service"
              value="Оплата уроков по информатике онлайн"
              readonly
              required
            />
        <div class="inline-fields">
          <label>
            Дата платежа
            <input type="date" id="payment-date" name="payment-date" />
          </label>
          <label>
            Время платежа
            <input type="time" id="payment-time" name="payment-time" />
          </label>
        </div>
    const PAYMENT_REASON = 'Репетиторские услуги дополнительного обучения по информатике';
    const paymentDateInput = document.getElementById('payment-date');
    const paymentTimeInput = document.getElementById('payment-time');
    function buildManualDate(dateValue, timeValue) {
      if (!dateValue && !timeValue) return null;

      if (!dateValue || !timeValue) {
        alert('Укажите и дату, и время платежа или оставьте поля пустыми.');
        return 'invalid';
      }

      const [year, month, day] = dateValue.split('-').map(Number);
      const [hours, minutes] = timeValue.split(':').map(Number);

      if (![year, month, day, hours, minutes].every(Number.isFinite)) {
        alert('Введите корректные дату и время платежа.');
        return 'invalid';
      }

      const manualDate = new Date(year, month - 1, day, hours, minutes);
      if (Number.isNaN(manualDate.getTime())) {
        alert('Введите корректные дату и время платежа.');
        return 'invalid';
      }

      return manualDate;
    }

        pushLines(PAYMENT_REASON);
      const manualDate = buildManualDate(paymentDateInput?.value, paymentTimeInput?.value);
      if (manualDate === 'invalid') return;

      const now = manualDate || new Date();
